<!-- Created: 22/10/2025 by Yann Kerhervé -->
<!-- C:\Users\yaker\Pictures\2025 - 7 Autriche-suisse best of -->
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery Lightbox</title>
  <link rel="icon" type="image/png" href="facion.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #fcfcfc; color: #333; }
    .fixed-btn { position: fixed; bottom: 1.5rem; left: 1.5rem; z-index:50; }

    /* Masonry Grid */
    .masonry { column-count:1; column-gap:1rem; }
    @media(min-width:640px){ .masonry{ column-count:2; } }
    @media(min-width:1024px){ .masonry{ column-count:6; } }

    .masonry-item {
      position: relative; overflow: hidden; margin-bottom:1rem; border-radius:1rem;
      break-inside: avoid; box-shadow:0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .masonry-item img {
      width:100%; display:block; height:auto; max-height:200px; object-fit:cover;
      transition: filter 0.3s ease, transform 0.3s ease;
    }

    .masonry-item:hover img { filter: brightness(70%); transform: scale(1.02); }

    .caption-overlay {
      position:absolute; top:0; left:0; right:0; bottom:0;
      background-color: rgba(0,0,0,0.4); color:#fff; opacity:0;
      display:flex; align-items:center; justify-content:center; text-align:center;
      font-size:0.95rem; font-weight:500; padding:0.75rem 1rem; transition: opacity 0.3s ease;
    }
    .masonry-item:hover .caption-overlay { opacity:1; }

    /* Lightbox */
#lightbox {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.9);
  display: none; /* invisible au départ */
  align-items: center;
  justify-content: center;
  z-index: 9999;
  overflow: hidden;
}

#lightbox img {
  max-width: 90%; max-height: 90%;
  object-fit: contain;
  position: relative;
  opacity: 0; /* départ transparent */
  transition: opacity 0.5s ease; /* effet fondue */
}

#lightbox .caption {
  position: absolute;
  bottom: 2rem; right: 2rem;
  color: #fff;
  font-size: 1rem;
  background: rgba(0,0,0,0.5);
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
}

#lightbox .close {
  position: absolute; top: 2rem; left: 2rem;
  font-size: 2rem; color: #fff;
  cursor: pointer;
  background: rgba(0,0,0,0.3);
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
}

#lightbox .prev, #lightbox .next {
  position: absolute; top: 50%;
  transform: translateY(-50%);
  font-size: 2rem; color: #fff;
  cursor: pointer; background: rgba(0,0,0,0.3);
  padding: 0.5rem 1rem; border-radius: 0.5rem;
  user-select: none;
}

#lightbox .prev { left: 1rem; }
#lightbox .next { right: 1rem; }

  </style>
</head>
<body class="bg-[#fcfcfc] text-[#333333]">

  <!-- Floating button -->
  <a href="database.html" class="fixed-btn px-6 py-3 bg-[#e5e7eb] text-[#333333] font-bold rounded-full shadow-lg hover:bg-[#d1d5db] transition-colors duration-300 transform hover:scale-105">
    To data base
  </a>

  <!-- Header -->
  <header class="bg-[#fcfcfc] bg-opacity-90 backdrop-blur-sm sticky top-0 z-40 p-4">
    <div class="container mx-auto flex items-center justify-between">
      <a href="index.htm"><img src="c18lw.png" alt="Logo" class="w-12 h-12 rounded-lg"/></a>
      <nav class="hidden md:flex items-center space-x-8 text-lg font-medium">
        <a href="index.htm#projects" class="hover:text-[#6b7280]">Project</a>
        <a href="index.htm#features" class="hover:text-[#6b7280]">Features</a>
        <a href="database.htm" class="px-5 py-2 bg-[#333] text-[#fcfcfc] rounded-full hover:bg-[#6b7280]">To data base</a>
        <a href="credits.htm" class="hover:text-[#6b7280]">Contact</a>
      </nav>
      <a href="https://www.univ-brest.fr/hcti/en"><img src="hcti.png" alt="HCTI Logo" class="h-12 rounded-lg"/></a>
    </div>
  </header>

  <!-- Gallery -->
  <main>
    <section class="py-20 bg-[#f5f5f5]">
      <div class="container mx-auto px-6 md:px-12">
        <h1 class="text-4xl md:text-5xl font-bold text-center text-[#333333] mb-12">Image Gallery</h1>
        <div id="gallery" class="masonry"></div>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <div id="lightbox">
    <span class="close">&times;</span>
    <span class="prev">&#10094;</span>
    <span class="next">&#10095;</span>
    <img src="" alt="">
    <div class="caption"></div>
  </div>

  <!-- Footer -->
  <footer class="bg-[#333333] text-[#fcfcfc] py-12">
    <div class="container mx-auto px-6 md:px-12">
      <div class="flex flex-col md:flex-row items-center justify-between">
        <div class="flex items-center space-x-6 md:space-x-8">
          <img src="c18lwblanc.png" alt="Site Logo" class="w-20 h-20 rounded-lg">
          <img src="hctiblanc.png" alt="HCTI Logo" class="w-12 rounded-lg">
        </div>
        <nav class="mt-8 md:mt-0 flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-8 text-lg font-medium">
          <a href="index.htm#projects" class="hover:text-[#9ca3af]">Projects</a>
          <a href="index.htm#features" class="hover:text-[#9ca3af]">Features</a>
          <a href="database.htm" class="hover:text-[#9ca3af]">To data base</a>
          <a href="credits.htm" class="hover:text-[#9ca3af]">Contact</a>
        </nav>
      </div>
      <div class="mt-8 text-center text-sm text-[#9ca3af]">
        © 2025 - 2026 A. Kerhervé - HCTI - All rights reserved.
      </div>
    </div>
  </footer>

  <!-- JS -->
  <script>
    // Génération aléatoire des images et légendes pour demo
    const n = 409;
    const phrases = [
      "Workshop on epistolary manuscripts",
      "Archives consultation at Brest Library",
      "Digital humanities project demonstration",
      "Team research session at HCTI Lab",
      "Eighteenth-century letter manual example",
      "Manuscript restoration project",
      "Exhibition: Letters through the Centuries",
      "Historical document study",
      "Student project showcase",
      "Conference on letter-writing"
    ];

    const gallery = document.getElementById('gallery');
    const images = [];
    for(let i=1; i<=n; i++){
      const caption = phrases[Math.floor(Math.random()*phrases.length)] + ` – Image ${i}`;
      const filename = `images/image (${i}).jpg`; // à adapter
      images.push({filename, caption});

      const div = document.createElement('div');
      div.className='masonry-item';
      div.innerHTML = `<img src="${filename}" alt="${caption}" loading="lazy"><div class="caption-overlay">${caption}</div>`;
      div.addEventListener('click',()=>openLightbox(i-1));
      gallery.appendChild(div);
    }

    // Lightbox
    let currentIndex = 0;
    const lightbox = document.getElementById('lightbox');
    const lbImage = lightbox.querySelector('img');
    const lbCaption = lightbox.querySelector('.caption');

    // ouverture lightbox
    function openLightbox(index){
      currentIndex = index;
      lbImage.style.opacity = 0;  // image transparente
      lbImage.src = images[index].filename;
      lbCaption.textContent = images[index].caption;
      lightbox.style.display = 'flex';
      setTimeout(()=>{ lbImage.style.opacity = 1; },50); // fade-in
    }

    // changer image avec fondue
    function changeImage(newIndex){
      lbImage.style.opacity = 0; // fade-out
      currentIndex = (newIndex + images.length) % images.length;
      setTimeout(()=>{
        lbImage.src = images[currentIndex].filename;
        lbCaption.textContent = images[currentIndex].caption;
        lbImage.style.opacity = 1; // fade-in
      }, 300); // correspond au fade-out
    }

    // gestion des clics
    lightbox.querySelector('.close').addEventListener('click',()=>lightbox.style.display='none');
    lightbox.querySelector('.prev').addEventListener('click',()=>changeImage(currentIndex-1));
    lightbox.querySelector('.next').addEventListener('click',()=>changeImage(currentIndex+1));

    // navigation clavier
    document.addEventListener('keydown', e=>{
      if(lightbox.style.display==='flex'){
        if(e.key==='ArrowLeft') changeImage(currentIndex-1);
        if(e.key==='ArrowRight') changeImage(currentIndex+1);
        if(e.key==='Escape') lightbox.style.display='none';
      }
    });


  </script>
</body>
</html>
